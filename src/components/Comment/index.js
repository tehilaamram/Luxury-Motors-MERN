import React from 'react';
// import _ from 'lodash';
import { withRouter } from "react-router-dom";
import autoBind from 'react-autobind';
import { connect } from 'react-redux';
import Rating from '@material-ui/lab/Rating';
import './style.css';

class Comment extends React.Component {
    constructor(props) {
        super(props);
        autoBind(this);
    }
    render() {
        return (
            <div className="comment-main">
                <div className="writer-name-container">
        <span className="writer-name-title">{this.props.name}</span>
                </div>
                <div className="comment-date-container">
                    <span>{new Date(this.props.date).toDateString()} {new Date(this.props.date).toLocaleTimeString()}</span>
                </div>
                <div className="comment-rate">
                <Rating name="read-only" value={this.props.rate} readOnly id="custom-user-rate" />
                    </div>
                <div className="comment-text">
                    {this.props.text}
                </div>
                <div className="comment-likes-container">
                    <div className="comment-dislike" id={this.props.dislike.includes(this.props.user.id) ? "checked" : "unchecked"}>
        <div className="comment-dislike-num" >{this.props.dislike.length}</div>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 17" onClick={() => {this.props.dislikeChange()}}>
                            <path d="M8.983,17.51 C9.671,17.36 10.205,16.734 10.243,15.953 C10.331,13.642 10.63,12.273 12.063,10.209 C12.243,10.494 12.556,10.687 12.913,10.687 L16.543,10.687 C17.093,10.687 17.55,10.231 17.55,9.679 L17.55,2.423 C17.55,1.871 17.094,1.415 16.542,1.415 L12.914,1.415 C12.5763374,1.41673702 12.2618796,1.58709961 12.076,1.869 C11.8846668,1.70832326 11.6825245,1.56097659 11.471,1.428 C11.139,1.228 10.763,1.109 10.249,1.056 C9.221,0.95 7.535,1.028 3.642,1.012 C3.54980494,1.01402807 3.46100085,1.0471534 3.39,1.106 C2.412,1.657 -0.005,5.882 0,9.818 C0.02,10.76 0.433,11.292 1.223,11.292 L6.413,11.292 C6.103,13.334 6.309,15.21 6.999,16.426 C7.372,17.082 7.915,17.449 8.454,17.528 C8.544,17.541 8.63,17.544 8.719,17.541 C8.807,17.538 8.897,17.528 8.983,17.509 L8.983,17.51 Z M7.263,10.964 C7.27881139,10.847144 7.24500807,10.7290027 7.1697789,10.6381957 C7.09454973,10.5473888 6.98475772,10.4922004 6.867,10.486 L1.337,10.486 C1.051,10.456 0.8,10.409 0.8,9.73 C0.8,8.863 0.934,7.343 1.623,5.547 C2.314,3.75 3.343,1.799 3.7,1.862 C4.67,1.796 9.296,1.772 10.167,1.862 C10.612,1.908 10.821,1.974 11.056,2.114 C11.267,2.241 11.526,2.464 11.906,2.769 L11.906,9.056 C10.033,11.438 9.529,13.441 9.436,15.922 C9.167,17.157 8.078,16.816 7.698,16.029 C7.142,14.042 6.998,12.354 7.264,10.964 L7.263,10.964 Z M16.543,9.881 L12.913,9.881 C12.859011,9.88302007 12.806647,9.86231822 12.7686348,9.82392592 C12.7306226,9.78553362 12.7104428,9.73296624 12.713,9.679 L12.713,2.423 C12.713,2.304 12.795,2.221 12.913,2.221 L16.543,2.221 C16.661,2.221 16.743,2.304 16.743,2.423 L16.743,9.679 C16.7455572,9.73296624 16.7253774,9.78553362 16.6873652,9.82392592 C16.649353,9.86231822 16.596989,9.88302007 16.543,9.881 Z" transform="translate(0 -1)"></path>
                        </svg>
                    </div>
                    <div className="comment-like" id={this.props.like.includes(this.props.user.id) ? "checked" : "unchecked"}>
        <div className="comment-like-num" >{this.props.like.length}</div>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 17" onClick={() => {this.props.likeChange()}}>
                            <path d="M8.567,1.033 C7.879,1.183 7.345,1.808 7.307,2.589 C7.219,4.9 6.92,6.269 5.487,8.333 C5.30485753,8.03795265 4.9837322,7.85736688 4.637,7.855 L1.007,7.855 C0.458,7.855 0,8.31 0,8.863 L0,16.119 C0,16.671 0.456,17.127 1.008,17.127 L4.636,17.127 C4.984,17.127 5.292,16.946 5.474,16.673 C5.684,16.843 5.878,16.994 6.079,17.114 C6.411,17.314 6.787,17.433 7.301,17.486 C8.329,17.592 10.015,17.514 13.908,17.53 C14.0001951,17.5279719 14.0889991,17.4948466 14.16,17.436 C15.138,16.885 17.555,12.66 17.55,8.724 C17.53,7.782 17.117,7.25 16.327,7.25 L11.137,7.25 C11.447,5.208 11.241,3.332 10.551,2.116 C10.178,1.46 9.635,1.093 9.096,1.014 C9.00796493,1.00103838 8.9189093,0.996351244 8.83,1 C8.74122454,1.00280847 8.65287557,1.01351744 8.566,1.032 L8.567,1.033 Z M10.287,7.578 C10.242,7.81 10.447,8.057 10.683,8.056 L16.213,8.056 C16.498,8.086 16.749,8.133 16.749,8.812 C16.749,9.679 16.615,11.199 15.926,12.995 C15.236,14.792 14.207,16.743 13.85,16.68 C12.88,16.746 8.254,16.77 7.383,16.68 C6.938,16.634 6.729,16.568 6.494,16.428 C6.283,16.301 6.024,16.078 5.644,15.773 L5.644,9.486 C7.517,7.104 8.021,5.101 8.114,2.62 C8.383,1.385 9.472,1.726 9.852,2.513 C10.408,4.5 10.552,6.188 10.286,7.578 L10.287,7.578 Z M1.006,8.66 L4.636,8.66 C4.754,8.66 4.836,8.743 4.836,8.862 L4.836,16.118 C4.83855716,16.1719662 4.81837736,16.2245336 4.78036518,16.2629259 C4.742353,16.3013182 4.68998901,16.3220201 4.636,16.32 L1.006,16.32 C0.952010986,16.3220201 0.899646997,16.3013182 0.861634819,16.2629259 C0.823622641,16.2245336 0.803442837,16.1719662 0.806,16.118 L0.806,8.863 C0.806,8.743 0.888,8.661 1.006,8.661 L1.006,8.66 Z" transform="translate(0 -1)"></path>
                        </svg>
                    </div>
                </div>
            </div>
        );
    }
}

const mapStateToProps = (state) => ({
    user: state.user,
  });
  
export default connect(mapStateToProps, {})(withRouter(Comment));
// export default withRouter(Comment);